let pokemonRepository=function(){let e=[],t='https://pokeapi.co/api/v2/pokemon/?limit=150';function n(t){'object'==typeof t&&'name'in t?e.push(t):console.log('pokemon is not correct')}function o(e){i(e).then(function(){showModal(e)})}function i(e){let t=e.detailsUrl;return fetch(t).then(function(e){return e.json()}).then(function(t){e.id=t.id,e.imageUrl=t.sprites.other.dream_world.front_default,e.height=t.height,e.weight=t.weight,e.types=t.types,e.abilities=t.abilities}).catch(function(e){console.error(e)})}return{add:n,getAll:function(){return e},addListItem:function(e){let t=document.querySelector('.list-group'),n=document.createElement('li');n.classList.add('group-list-item');let i=document.createElement('button');i.innerText=e.name,i.classList.add('btn','btn-primary','btn-lg','btn-block'),i.setAttribute('data-target','#pokemonModal'),i.setAttribute('data-toggle','modal'),n.appendChild(i),t.appendChild(n),i.addEventListener('click',function(){o(e)})},loadList:function(){return fetch(t).then(function(e){return e.json()}).then(function(e){e.results.forEach(function(e){n({name:e.name,detailsUrl:e.url})})}).catch(function(e){console.error(e)})},loadDetails:i,showDetails:o}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(e){pokemonRepository.addListItem(e)})});let dialogPromiseReject,modalContainer=document.querySelector('#modal-container');function showModal(e,t){modalContainer.innerHTML='';let n=document.createElement('div');n.classList.add('modal');let o=document.createElement('button');o.classList.classList.add('modal-close'),o.innetText='Close',o.addEventListener('click',hideModal);let i=document.createElement('h1');i.innerText=e;let l=document.createElement('p');l.innerText='Pokemon height:'+t,n.appendChild(o),n.appendChild(i),n.appendChild(l),modalContainer.appendChild(n),modalContainer.classList.add('is-visible')}function hideModal(){document.querySelector('#modal-container').classList.remove('is-visible'),dialogPromiseReject&&(dialogPromiseReject(),dialogPromiseReject=null)}function showDialog(e,t){showModal(e,t);let n=modalContainer.querySelector('.modal'),o=document.createElement('button');o.classList.add('modal-confirm'),o.innerText='Confirm';let i=document.createElement('button');return i.classList.add('modal-cancel'),i.innerText='Cancel',n.appendChild(o),n.appendChild(i),o.focus(),new Promise((e,t)=>{i.addEventListener('click, hideModal'),o.addEventListener('click',()=>{dialogPromiseReject=null,hideModal(),e()}),dialogPromiseReject=t})}document.querySelector('#show-dialog').addEventListener('click',()=>{showDialog('Confirm action','Are you sure you want to do this?').then(function(){alert('confirm!')},()=>{alert('not confirmed')})}),window.addEventListener('keydown',e=>{'Escape'===e.key&&modalContainer.classList.contains('is-visible')&&hideModal()}),modalContainer.addEventListener('click',e=>{e.target===modalContainer&&hideModal()}),document.querySelector('#show-modal').addEventListener('click',()=>{showModal('Pokemon name','Pokemon height')});